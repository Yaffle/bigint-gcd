<script type="module">

import gcd from './gcd.js';

setTimeout(() => {
  const a = (1n << 200n) + 1n;
  const b = (1n << 100n) + 1n;
  const g = gcd(a, b);
  console.assert(g.toString() === '1', g.toString());
}, 100);

// regression:
var a = 47224680878584892774721521504636737681065246720n;
var b = 43379638141618603274329264619520n;
console.assert(gcd(a, b) === b);

console.assert(gcd(18446744073709551615n, 18446744073709551615n) === 18446744073709551615n);

const u128 = function (hi, lo) {
  return (BigInt.asUintN(64, hi) << 64n) | BigInt.asUintN(64, lo);
};
console.assert(gcd((u128(2n**64n - 1n, 312n) << 100n) + 1n, (u128(1n, 311n) << 100n) + 1n) === 1n);


const tmp = gcd.gcdext(5n**1000n, 7n**1000n);
console.assert(tmp[0] === 15631657117896519054420352392476695037326996136979908841442243802006465277641570624790544714229736678688121150910422953285517012209869330422574181732118307291663149372321575391459627681473328246453188693422783826834883500383824423737477989412898144215734099500073708897553839503116126781744905888591780905379679893141496309275443612552823725769805185855648220256546604275385884159160797367049776168578692437205588039919681837424252453832877530112829178591963128737600904644067976817869663482424768931280638534763063013738080928804066357273138061712639495888629718702095675166314187790884727628560888178873265509657327695057653060952867804992156450302330426839404248369313297528927310899197466582156815124843790990434084728251101289357296505387083752843169039102419642390407634199856721068742307942690145132347814666632263515581763369944000219262n);
console.assert(tmp[1] === -116404385341606940976401089891669507644953284253942120608410189634388807583073501159819335896478660977372338118285893763253511353657445767516635960993836236797812029795411430464451325492394189210205388029224127892458496237353036816118301386028533197383940681083355114972987340842723293370610904285138887817409703085916203271978676246613561625585789114570911199952733424609576078445571219317850354221066944513831040289987484691543784345888023887597591318828620191843824931984403347358722931984795925367733242148216249208161234552084346923851718373720982933808536594229072005069978095958172685934462768138533568150406981957435550922631132032789892065710049453857505815828405023971757908878487979818749n);
console.assert(tmp[2] === 1n);

const tmp2 = gcd.halfgcd(5n**1000n, 7n**1000n);
console.assert(tmp2.join(' ') === '19906408420487904035891251091433742095753491541195123518780843303556425438207439963790835590337853648997480517729194305461438201315894662711405194226073892269896434156708616552462173732892726893438728156473886994593188139000608574755049243647976152946315185688743453420588274231380680557330804759519264138371374264980050529400774317441987791194596121435885210124482793032358323778811129135492426625924391036242516166074785 -148237209853647128996117745648285310222465346158452980520801153643020288887982197983222159928391708120018889765357536997736571810697428222061433419126844627693869178383106985961192269329184311697526051122877129608843109589413853998600280688541695240391929390403976703118443706 -137851015796039118475610658835138517180523990961014084132756853650958291581922341264301733845612205207541176172821938159886685917674282421408838710935311226195311138279726979110817080434370805083625921527230320337618239504143122156481543951597794641800205199788998362486733234135331051565097351651564519859948876183559271785833329648221186257227040639145195979166052059241349048945148925540331605924879600399890516760775449 1026536255332945934762775898116339225382248081994236645538638303354975468201623274716685343916095160862316032297691150929962188684017734452282731846121326075332599800479170080791498053544958722409841260154585422321220623131062430323582027541829306698892404740729328756159519307 838650375188544368200283551989815329396783673751065430888771878399842753159287945825975627162389547910538109838628819580256331270961257330175675379294493785381853098069278337976535900974944299039028468755229634165839082335735820392390129622071780984599590935586884808757266442195606908166869154299917479262542482189021090062503424809235644772275739411287868845289963721688067287314409697347294098888790791360663075190846919 488127123379070593486749984923167287238386003378597040740482169972709616570076697675464842381712482834798416622861490438089209523638072249900277475862864142137189534579688598953161285642535490356331707027461610150233445028413127098076415011965136857780230811072721011236695943738681738895376534438616810613131117938751091541680358329888154427487554649087938108431439881636793282399472975124623198622067914160761561943953682');

const tmp3 = gcd.halfgcd(0n, 0n);
console.assert(tmp3.join(' ') === '1 0 0 1 0 0'); // should not throw exceptions

</script>